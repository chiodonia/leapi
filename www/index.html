<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name='viewport' content='width=device-width, initial-scale=1, user-scalable=no' />
	<title>Le api</title>
<style>

    body {
        width: 104px;
        width: 768px;
        margin: 0px;
        background-color: black;
    }
    
    .dark-background {
        background-color: black;
    }

    .hell-background {
        background-color: rgb(252, 252, 223);
    }

	.full-screen {
        position: absolute;
        width: 768px;
        height: 1024px;
        z-index: 10;
    }

	#button1 {
        position:absolute;
        left:70px;
        top:170px;
        width: 104px;
        height: 90px;
	}

    #button2 {
        position:absolute;
        left:156px;
        top:120px;
        width: 104px;
        height: 90px;
	}

    #button3 {
        position:absolute;
        left:242px;
        top:70px;
        width: 104px;
        height: 90px;
	}

    #button4 {
        position:absolute;
        left:330px;
        top:20px;
        width: 104px;
        height: 90px;
	}

    #button5 {
        position:absolute;
        left:414px;
        top:70px;
        width: 104px;
        height: 90px;
	}

    #button6 {
        position:absolute;
        left:499px;
        top:120px;
        width: 104px;
        height: 90px;
	}

    #button7 {
        position:absolute;
        left:584px;
        top:170px;
        width: 104px;
        height: 90px;
	}

	#buttonhome {
        position:absolute;
        left:10px;
        top:10px;
        width: 60px;
        height: 60px;
	}

	#buttontutorial {
        position:absolute;
        left:698px;
        top:10px;
        width: 60px;
        height: 60px;
	}

	video {
        position: absolute;
        width: 768px;
        height: 1024px;
        background-size: cover;
        z-index: -10;
	}

</style>
</head>
<body>
	<div id="container"></div>
	<div id="videos"></div>
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript">
        app.initialize();
    </script>   
    <script src="js/jquery.min.js"></script>
    <script src="js/hammer.min.js"></script>
    <script src="js/jquery.hammer.js"></script>
	<script>

		$(function() {

            var step = 1;

            function setUp() {
                var html = "<video id='video0' preload='true' autoplay loop>" +
                            "<source src='video/video_0.mp4' type='video/mp4'>" +
                            "Your browser does not support the video tag." +
                            "</video>"
                for (var v=1; v<8; v++) {
                    html = html + "<video id='video"+v+"' preload='true' autoplay>" +
                            "<source src='video/video_"+v+".mp4' type='video/mp4'>" +
                            "Your browser does not support the video tag." +
                            "</video>";
                }
                $('#videos').html(html);
            }
            
            function home() {
                $('body').removeClass("hell-background");
                hideVideos();
                $('#container').html("<img id='home' src='img/home.png' class='full-screen'>");
                $('#home').hammer().bind('tap', function(event) {
                    tutorial(1);
                });
            }

            function hideVideos() {
                for (var v=0; v<8; v++) {
                    $('#video'+v).get(0).pause();
                    $('#video'+v).hide();
                    $('#video'+v).get(0).currentTime=0;
                }
            }
            
            function displayVideo(i) {
                for (var v=0; v<8; v++) {
                    if (v==i) {
                        setTimeout(function() {
//                            $('#video'+i).get(0).currentTime=0;
                            $('#video'+i).show();
                            $('#video'+i).get(0).play();
                            $('#video'+i).bind("ended", function() {
                                $('#video'+i).hammer().bind('tap', function(event) {
                                    start();
                                });
                            });
                        }, 10);
                    } else {
                        $('#video'+v).hide();         
                        $('#video'+v).get(0).pause();
                        $('#video'+v).get(0).currentTime=0;
                    }
                }
            }

            function tutorial(i) {
                  step = i;
                  if (step==1) {
                      $('body').removeClass("hell-background");
                      hideVideos();
                      $('#container').html("<img id='tutorial' src='img/tuto_"+step+".png' class='full-screen'>");
                  } else {
                      $('#tutorial').attr('src', 'img/tuto_'+step+'.png');
                  }
                  $('#tutorial').hammer().bind('tap', function(event) {
                      if (step<6) {
                          tutorial(i+1);
                      } else {
                          start();
                      }
                  });
                  if (step>5) {
                      displayVideo(0);
                  } 
            }

		 	function disableButtonsExcept(b) {
				for (var i = 1; i <= 7; i++) {
                    if (i!=b) {
                        $('#button'+i).attr('src', 'img/bu_'+i+'_off.png');
                    } 
                    $('#button'+i).unbind('click');
				}
		 	}

            function enableButtons() {
                var html = "<img id='buttonhome' src='img/bu_home.png'>";
                html = html + "<img id='buttontutorial' src='img/bu_tutorial.png'>";
                for (var b = 1; b <= 7; b++) {
                    html = html + "<img id='button" + b + "' src='img/bu_" + b + "_on.png'>";
                }
                $('#container').html(html);
                $('#buttonhome').bind("click", function() {
                      home();
                });
                $('#buttontutorial').bind("click", function() {
                      tutorial(1);
                });
                for (var b = 1; b <= 7; b++) {
                    (function(index) {
                            $('#button'+index).bind('click', function(event) {
                                disableButtonsExcept(index);
                                displayVideo(index);
                            });
                     })(b);                    
                }
		 	}

		 	function start() {
                $('body').addClass("hell-background");
                 displayVideo(0);
                 enableButtons();
		 	}

            setUp();
            home();

		});

	</script>
</body>
</html>
